language: python
# sudo: false
python:
  - "2.7"
notifications:
  email: 
    on_failure: always
cache:
  - apt
  - directories:
    - $HOME/.cache/pip
addons:
  apt:
    packages:
    - libblas-dev
    - liblapack-dev
    - gfortran
    - libzmq3-dev
    - libqt4-dev
    - qt4-dev-tools 
    - python-qt4-dev 
    - pyqt4-dev-tools
    - python-qt4
before_install:
  - pip install -U pip

  - pushd $HOME/.cache
  - wget http://tenet.dl.sourceforge.net/project/pyqt/sip/sip-4.18/sip-4.18.tar.gz
  - wget http://tenet.dl.sourceforge.net/project/pyqt/PyQt4/PyQt-4.11.4/PyQt-x11-gpl-4.11.4.tar.gz
  - tar xzf sip-4.18.tar.gz
  - tar xzf PyQt-x11-gpl-4.11.4.tar.gz
  - popd
install:
  - travis_wait travis_retry pip install -r requirements.txt --upgrade
  - pip install pyzmq --upgrade
  - pushd $HOME/.cache/sip-4.18/
  - python configure.py
  - make
  - sudo make install
  - pushd $HOME/.cache/PyQt-x11-gpl-4.11.4/
  - python configure.py
  - make
  - sudo make install
  - popd
  - popd
script: 
  - python setup.py mosaic_tests
